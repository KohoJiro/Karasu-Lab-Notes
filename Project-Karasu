# üê¶ Project Karasu: Lab Notes
## Day 0: Migration & Infrastructure Prep

**Date:** 2026-01-08  
**Status:** ‚úÖ Phase 1 Complete

---

### üõ† Actions Taken
* **Data Migration:** Identified ~20GB of legacy Windows data for archival.
* **Compression:** Wrapped data into a `.7z` archive using Ultra settings.
    * *Error Handling:* Encountered `Access Denied` on `ccsetup.exe`. Verified archive integrity; structure is sound.
    * *Final Size:* 17.3 GB.
* **Redundancy (3-2-1 Backup):**
    * **Local 1:** Copied to 128GB Ventoy Drive (exFAT).
    * **Local 2:** Created dedicated Ubuntu Server 24.04 LTS Bootable (16GB Rufus).
    * **Cloud:** Uploading to Student Google Drive as an off-site fail-safe.
* **Branding:** Established **KohoJiro** GitHub identity and initialized this log.

### ‚ö†Ô∏è Technical Notes
* **Metadata Warning:** Confirmed that "Loss of Properties" during copy to exFAT does not affect `.7z` or `.iso` integrity.
* **Redundancy:** Utilizing both a "Swiss Army Knife" Ventoy drive and a dedicated Rufus drive for hardware flexibility.

### üìç Next Steps
1. Perform SHA256 Hash verification once files are settled.
2. Wipe HP Laptop hardware and initiate Ubuntu Server installation.
3. Establish SSH handshake between Karasu (Server) and T14 (Workstation).

---
*Generated by KohoJiro / Project Karasu*
---

## Log: 2026-01-09 - Strategy Finalization & Integrity Audit
**Date:** 2026-01-09  
**Status:** ‚úÖ Phase 1 (Post Migration Audit &  Documentation) - COMPLETE

---

### üõ† Actions Taken
* **Infrastructure Scoping:** Formally defined the "Headless Pivot" strategy. Documented the transition of the HP 17z-ca300 from a primary workstation to Node 01 (Karasu) to bypass known internal hardware failures.
* **Documentation Architecture:** * Created and initialized the Project README.
    * Established a "Strategy Rationale" section to justify the repurposing of failing hardware.
    * Defined Node 02 requirements (Lenovo T14 Gen 6) to resolve the current procurement blocker.
* **Integrity Validation (Manual Hash Audit):** Performed a three-step verification to ensure 100% data integrity before disk decommissioning:
    1. **Local Hash Generation:** Generated SHA256 for the source archive
       * *Command:* '(Get-FileHash C:\Users\Admin\Desktop\Transfer_to_T14.7z -Algorithm SHA256)'
    2. **Remote Hash Generation:** Generated SHA256 for the Ventoy destination archive.
       * *Command:* '(Get-FileHash E:\Transfer_to_T14.7z -Algorithm SHA256)'
    3. **Comparative Validation:** Verified strings via PowerShell logic:
       * *Command:* `(Get-Content "$HOME\Desktop\Original_Hash.txt").Trim() -eq (Get-Content "$HOME\Desktop\Ventoy_Hash.txt").Trim()`
       * *Result:* `True` (Bit-perfect integrity confirmed).

### üõ°Ô∏è Verified Data Signature
* **Archive:** `Transfer_to_T14.7z` (17.3 GB)
* **SHA256:** `A5B92844D629B230CB1EFBBAC027CCF0B9C325E25AEC47A95D0C076DAFCACCBB`

### üìç Project State: STAGED
The project is officially paused pending hardware procurement. Data is verified, redundant, and archived. The technical roadmap is locked.

---
*Generated by KohoJiro / Project Karasu*
---

## Log: 2026-01-11 - OS Kernel Recovery & Service Deadlock Resolution
**Date:** 2026-01-11  
**Status:** ‚úÖ System Integrity Restored

---

### üõ† Actions Taken
* **System Integrity Audit:** Executed high-level repair commands to address `Error 0x800f0983`.
    * *Command:* `DISM /Online /Cleanup-Image /RestoreHealth`
    * *Command:* `sfc /scannow` (Result: Corrupt files found and successfully repaired).
* **Registry Policy Purge:** Identified and removed restrictive update policies left by legacy "debloat" scripts.
    * *Command:* `Remove-Item -Path "HKLM:\SOFTWARE\Policies\Microsoft\Windows\WindowsUpdate" -Recurse -ErrorAction SilentlyContinue`
    * *Command:* `Remove-Item -Path "HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\WindowsUpdate\Auto Update" -Recurse -ErrorAction SilentlyContinue`
* **Service Cache Reset:** Attempted manual reset of the Windows Update database and cryptographic catalog.
    * *Command:* `net stop wuauserv` (Success).
    * *Command:* `net stop cryptSvc` (Failure: Service locked in "Stopping" state).
* **Deadlock Investigation:** Attempted forced process termination of the unresponsive service.
    * *Command:* `taskkill /f /fi "SERVICES eq cryptSvc"`
    * *Result:* `INFO: No tasks running with the specified criteria.` (Confirmed **Zombie State** deadlock).
* **Final Remediation:** Initiated a Windows In-Place Repair Reinstall to force-reset kernel permissions and the Service Control Manager stack.

### ‚ö†Ô∏è Technical Notes
* **Root Cause Analysis:** Traceable to "black-box" debloat tool stripping **SYSTEM** permissions from core services, preventing digital signature verification for updates.
* **Zombie State:** Service reported as active but lacked a valid Process ID (PID), preventing standard termination.
* **Integrity Validation:** Re-verified `sfc /scannow` post-reinstall; result: `Windows Resource Protection did not find any integrity violations.`

### üìç Next Steps
1. Monitor Windows Update for 24 hours to ensure "Green" status persists.
2. Finalize hardware setup for school deadline.
3. **Operator Protocol:** "Debloat" scripts are officially deprecated; all future tuning must be manual and logged.

---
*Generated by KohoJiro / Project Karasu*
---

## Log: 2026-01-17 - Node 02 Infrastructure Hardening & Network Integration
**Date:** 2026-01-17  
**Status:** ‚úÖ T14 "Workstation" Setup Complete

---

### üõ† Actions Taken
* **Initial Provisioning:** Completed initial boot, user account setup, and OS login for Node 02 (Lenovo T14 Gen 6).
* **Firmware Chain-Loading:**
    * Executed full driver sweep via Lenovo Commercial Vantage.
    * Performed mandatory two-stage BIOS update: **v1.14 (Bridge)** followed by **v1.17 (Current)**.
* **Hardware Validation:** Confirmed **AMD-V Virtualization** remains `Enabled` in BIOS/Task Manager post-firmware flash.
* **Data Ingestion:** Downloaded `Transfer_to_T14.7z` from cloud fail-safe and extracted project assets to the local SSD.
* **Network Mesh Deployment:**
    * Installed Tailscale and integrated T14 into the Tailnet.
    * Configured **Run Unattended** mode and disabled **Key Expiry** to ensure persistent administrative access.
* **Terminal Environment:**
    * Established **Karasu-Hilo** profile in Windows Terminal.
    * Configured Red/Black color scheme for dedicated Node 01 (HP Server) access.
* **SSH Security Protocol:**
    * Generated **Ed25519** elliptic-curve key pair for secure, passwordless authentication.
    * *Command:* `ssh-keygen -t ed25519`
    * Verified key residency in `~/.ssh/`.

### ‚ö†Ô∏è Technical Notes
* **BIOS Dependency:** Note that v1.17 cannot be flashed directly from factory-base firmware; the v1.14 bridge is required for EC (Embedded Controller) compatibility.
* **Persistence:** "Run Unattended" is toggled on T14 to allow the machine to act as a persistent admin node even when logged out.

### üìç Next Steps
1. Initialize Node 01 (HP 17z-ca300) hardware.
2. Install Ubuntu Server 24.04 LTS via Rufus-prepared bootable media.
3. Deploy native Tailscale on Node 01 and establish the SSH handshake.

---
*Generated by KohoJiro / Project Karasu*
---

## Log: 2026-01-17 (Part 2) - Server Deployment & Perimeter Hardening
**Date:** 2026-01-17  
**Status:** ‚úÖ Node 01 "Karasu" Live & Hardened

---

### üõ† Actions Taken
* **OS Installation:** Provisioned Node 01 (HP 17z-ca300) with Ubuntu Server 24.04 LTS.
* **Network Integration:**
    * Joined Node 01 to the Tailnet for secure remote management.
    * Configured local hostname resolution for `karasu-hilo`.
* **SSH Perimeter Pivot (Ubuntu 24.04 Specific):**
    * **Port Migration:** Moved "Real" SSH from Port 22 to a non-standard secret port.
    * **Socket Override:** Bypassed the new Ubuntu `ssh.socket` default behavior to force the system to listen on the custom port.
    * *Command:* `sudo systemctl edit ssh.socket` (Added `ListenStream=[SECRET_PORT]`).
* **Honeypot Deployment (The Trap):**
    * Reclaimed Port 22 for security research.
    * Deployed **Cowrie** via Docker Compose to emulate a vulnerable SSH server.
    * *Mapping:* `0.0.0.0:22 -> 2222/tcp`.
* **Container Stack Orchestration:**
    * Deployed **Wiki.js** for documentation and **Pi-hole** for network-wide DNS filtering.
    * Integrated **Glances** for real-time resource monitoring.
    * Installed **Fail2Ban (The Hammer)** to monitor Cowrie logs and automatically null-route attacking IPs.
* **Workstation Optimization (T14):**
    * Configured `~/.ssh/config` to automate identity file and custom port usage.
    * *Command:* `ssh karasu-hilo` now maps directly to the hardened port with Ed25519 keys.

### ‚ö†Ô∏è Technical Notes
* **Ubuntu 24.04 Socket Trap:** Discovered that standard `sshd_config` changes are ignored by the systemd-socket-activated SSH service. Manual socket override is mandatory for port changes.
* **Docker V1 vs. V2:** Encountered `KeyError: 'ContainerConfig'` when using the legacy `docker-compose` tool to modify the Honeypot. 
* **Resolution:** Switched to the modern `docker compose` (plugin version) to resolve container state conflicts.
* **Resource Consumption:** Verified system health via Glances. CPU reported **98% Idle** despite running five concurrent services.

### üõ°Ô∏è Verified Infrastructure State
* **SSH Entrance:** Hardened (Non-standard port + Ed25519).
* **Port 22:** Active Honeypot (Active logging/trapping).
* **Core Services:** Wiki, Pi-hole, Glances, Fail2Ban (All "Up").

### üìç Next Steps
1. Initialize the Wiki.js database and begin porting legacy project notes.
2. Monitor Fail2Ban logs to verify automated banning of Port 22 "squatters."
3. Set up automated daily backups for the Docker volume data.

---
*Generated by KohoJiro / Project Karasu*
---
